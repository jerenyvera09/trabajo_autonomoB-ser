# Diagrama de Arquitectura - Sistema de Reportes ULEAM

## Semana 5: IntegraciÃ³n completa de servicios

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚                       USUARIO FINAL (Navegador)                        â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP (3000)
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚                    FRONTEND - React + TypeScript                       â”‚
â”‚                       http://localhost:3000                            â”‚
â”‚                                                                        â”‚
â”‚  CaracterÃ­sticas:                                                      â”‚
â”‚  â€¢ Interfaz responsiva y moderna                                       â”‚
â”‚  â€¢ Consumo de REST API y GraphQL                                       â”‚
â”‚  â€¢ ConexiÃ³n WebSocket persistente                                      â”‚
â”‚  â€¢ Notificaciones en tiempo real                                       â”‚
â”‚  â€¢ Dashboard de reportes                                               â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                         â”‚                     â”‚
       â”‚ HTTP GET                â”‚ HTTP POST           â”‚ WebSocket
       â”‚ /api/v1/reports         â”‚ GraphQL Query       â”‚ Bidireccional
       â”‚                         â”‚                     â”‚
       â–¼                         â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   REST API      â”‚    â”‚    GraphQL      â”‚    â”‚   WebSocket     â”‚
â”‚   (FastAPI)     â”‚â—„â”€â”€â”€â”¤   (Apollo)      â”‚    â”‚   (Gorilla)     â”‚
â”‚   Python 3.12   â”‚    â”‚   TypeScript    â”‚    â”‚   Go 1.23       â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚   Puerto: 8000  â”‚    â”‚   Puerto: 4000  â”‚    â”‚   Puerto: 8080  â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  Funciones:     â”‚    â”‚  Funciones:     â”‚    â”‚  Funciones:     â”‚
â”‚  â€¢ CRUD Reportesâ”‚    â”‚  â€¢ Queries      â”‚    â”‚  â€¢ Broadcast    â”‚
â”‚  â€¢ Auth JWT     â”‚    â”‚  â€¢ Consume REST â”‚    â”‚  â€¢ Eventos RT   â”‚
â”‚  â€¢ Validaciones â”‚    â”‚  â€¢ Agregaciones â”‚    â”‚  â€¢ Keepalive    â”‚
â”‚  â€¢ CORS         â”‚    â”‚  â€¢ Playground   â”‚    â”‚  â€¢ Notify API   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â–²
         â”‚                     â”‚
         â”‚                     â”‚ fetch()
         â”‚                     â”‚ http://localhost:8000
         â”‚                     â”‚ /api/v1/reports
         â”‚                     â”‚
         â–¼                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚                   BASE DE DATOS SQLite                         â”‚
â”‚                      (app.db)                                  â”‚
â”‚                                                                â”‚
â”‚  Tablas principales:                                           â”‚
â”‚  â€¢ usuarios                                                    â”‚
â”‚  â€¢ reportes                                                    â”‚
â”‚  â€¢ categorias                                                  â”‚
â”‚  â€¢ estados_reporte                                             â”‚
â”‚  â€¢ comentarios                                                 â”‚
â”‚  â€¢ archivos_adjuntos                                           â”‚
â”‚  â€¢ y mÃ¡s...                                                    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flujo de datos

### 1. Consulta de reportes vÃ­a REST
```
Frontend â†’ REST API (GET /api/v1/reports) â†’ SQLite â†’ JSON â†’ Frontend
```

### 2. Consulta de reportes vÃ­a GraphQL
```
Frontend â†’ GraphQL (POST /graphql) â†’ REST API â†’ SQLite â†’ JSON â†’ GraphQL â†’ Frontend
```

### 3. Notificaciones en tiempo real
```
Evento â†’ WebSocket Server â†’ Broadcast â†’ Todos los clientes conectados â†’ Frontend
```

## Puertos utilizados

| Servicio | Puerto | URL |
|---------|--------|-----|
| Frontend | 3000 | http://localhost:3000 |
| REST API | 8000 | http://localhost:8000 |
| GraphQL | 4000 | http://localhost:4000/graphql |
| WebSocket | 8080 | ws://localhost:8080/ws |

## ComunicaciÃ³n entre servicios

1. **Frontend â†” REST API**: HTTP requests directos
2. **Frontend â†” GraphQL**: HTTP POST con queries GraphQL
3. **Frontend â†” WebSocket**: ConexiÃ³n WebSocket persistente
4. **GraphQL â†’ REST API**: Fetch interno desde resolvers
5. **WebSocket**: Broadcast unidireccional a todos los clientes

## CaracterÃ­sticas de seguridad

- âœ… CORS habilitado en todos los servicios backend
- âœ… AutenticaciÃ³n JWT en REST API
- âœ… Validaciones de entrada en todos los servicios
- âœ… Manejo de errores estructurado
- âœ… WebSocket con reconexiÃ³n automÃ¡tica

## TecnologÃ­as por capa

**PresentaciÃ³n (Frontend)**
- React 18.2
- TypeScript
- Vite (Build tool)
- CSS moderno

**LÃ³gica de negocio (Backend)**
- Python 3.12 + FastAPI
- TypeScript + Apollo Server
- Go 1.23 + Gorilla WebSocket

**Persistencia**
- SQLite 3.x
- SQLAlchemy ORM

---

âœ… Arquitectura completa - Semana 5 (Commit 3)
ğŸ“… Fecha: 19 de octubre de 2025
ğŸ“ ULEAM - IngenierÃ­a de Software
